<div class="info-shop">
  <p-button label="Thêm thông tin" (click)="openNew()" *ngIf="isAdd"></p-button>
  <p-button label="Sửa thông tin" (click)="openEdit(infoShop[0])" *ngIf="!isAdd"></p-button>
  <div class="info-content" *ngIf="infoShop.length > 0">
    <div class="title">
      Thông tin về tpshop
    </div>
    <p-scrollPanel [style]="{width: '100%', height: '450px'}" styleClass="custombar1">
      <div class="body-content" *ngFor="let shop of infoShop">
        <div class="address">
          <span class="add-title">Logo</span>
          <div class="add-body" *ngIf="shop.logo.length > 0">
            <img [src]="shop.logo[0].url" style="width: 100px; height: 100px">
          </div>
        </div>
        <div class="address">
          <span class="add-title">Banner</span>
          <div class="add-body" *ngIf="shop.imgDescription.length > 0">
            <img [src]="shop.imgDescription[0].url" style="width: 100px; height: 100px">
          </div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ</span>
          <div class="add-body" *ngIf="shop.address; else nulladdress">
            {{shop.address}}
          </div>
          <ng-template #nulladdress >
            <span class="null-info">Thiếu thông tin address</span>
          </ng-template>
        </div>
        <div class="address">
          <span class="add-title">Email</span>
          <div class="add-body" *ngIf="shop.address; else nullemail">
            {{shop.gmail}}
          </div>
          <ng-template #nullemail >
            <span class="null-info">Thiếu thông tin email</span>
          </ng-template>
        </div>
        <div class="address">
          <span class="add-title">Số điện thoại</span>
          <div class="add-body" *ngIf="shop.phone; else nullphone">
            {{shop.phone}}
          </div>
          <ng-template #nullphone>
            <span class="null-info">Thiếu thông tin điện thoại</span>
          </ng-template>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ fanpage</span>
          <div class="add-body">{{shop.linkFanpage}}</div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ message</span>
          <div class="add-body">{{shop.linkMessage}}</div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ map</span>
          <div class="add-body">{{shop.linkGoogleMap}}</div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ zalo</span>
          <div class="add-body">{{shop.linkZalo}}</div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ trên map</span>
          <div class="add-body">{{shop.linkMap}}</div>
        </div>
        <div class="address">
          <span class="add-title">Địa chỉ trên shopee</span>
          <div class="add-body">{{shop.linkShoppe}}</div>
        </div>

        <div class="address">
          <span class="add-title">Giới thiệu</span>
          <div class="add-body" [innerHTML]="shop.description"></div>
        </div>
        <div class="address">
          <span class="add-title">Thông tin thêm</span>
          <div class="add-body" [innerHTML]="shop.introduce"></div>
        </div>

      </div>
    </p-scrollPanel>
  </div>

</div>

<p-dialog [(visible)]="infoShopDialog" [style]="{width: '900px'}" [closable]="closeAble" [header]="header" [modal]="true" styleClass="p-fluid">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="p-grid p-fluid" style="margin-top: 10px;">
      <div class="p-field p-lg-4">
        <label for="name" class="label">Tên shop</label>
        <input type="text" pInputText
               formControlName="name"
               inputId="name"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="gmail" class="label">Email</label>
        <input type="text" pInputText
               formControlName="gmail"
               inputId="gmail"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="phone" class="label">Số điện thoại</label>
        <input type="text" pInputText
               formControlName="phone"
               inputId="phone"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="address" class="label">Địa chỉ</label>
        <input type="text" pInputText
               formControlName="address"
               inputId="address"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkFanpage" class="label">Link fanpage</label>
        <input type="text" pInputText
               formControlName="linkFanpage"
               inputId="linkFanpage"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkMessage" class="label">Link message</label>
        <input type="text" pInputText
               formControlName="linkMessage"
               inputId="linkMessage"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkShoppe" class="label">Link shoppe</label>
        <input type="text" pInputText
               formControlName="linkShoppe"
               inputId="linkShoppe"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkMap">Link map</label>
        <input type="text" pInputText
               formControlName="linkMap"
               inputId="linkMap"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkGoogleMap">Link google map</label>
        <input type="text" pInputText
               formControlName="linkGoogleMap"
               inputId="linkGoogleMap"
        >
      </div>
      <div class="p-field p-lg-4">
        <label for="linkZalo">Link zalo</label>
        <input type="text" pInputText
               formControlName="linkZalo"
               inputId="linkZalo"
        >
      </div>
      <div class="p-field p-lg-12">
        <label for="description" class="label">Mô tả về shop</label>
        <ns-quill-editor formControlName="description" [style]="{'height':'320px'}" ></ns-quill-editor>

      </div>

      <div class="p-field p-lg-12">
        <label for="introduce" class="label">Thông tin thêm</label>
        <ns-quill-editor formControlName="introduce" [style]="{'height':'320px'}" ></ns-quill-editor>

      </div>

      <div class="p-field p-lg-12" >
        <label for="logo" class="label">Logo shop</label>
        <p-multiSelect formControlName="logo" [options]="images"  defaultLabel="Select a images" optionLabel="name"
                       class="multiselect-custom" [filter]="false" [ngClass]="{'is-invalid': submitted && f['logo'].errors}">
          <ng-template let-value pTemplate="selectedItems">
            <div class="country-item country-item-value" *ngFor="let option of form.get('logo')?.value">
              <div>{{option.name}}</div>
            </div>
            <div *ngIf="!this.form.get('logo')?.value || this.form.get('logo')?.value.length === 0" class="country-placeholder">
              Select images
            </div>
          </ng-template>
          <ng-template let-image pTemplate="item">
            <div class="country-item">
              <div>{{image.name}}</div>
            </div>
          </ng-template>
        </p-multiSelect>
        <div *ngIf="type === 'EDIT'" >
          <div class="p-md-12 image-list" *ngFor="let image of imageEdit">
            <img [src]="image.url" style="width: 40px; height: 40px">
            <span>{{image.name}}</span>
            <i class="pi pi-trash" (click)="deleteImageOfProduct($event, image.id)" style="cursor: pointer"></i>
            <p-confirmPopup></p-confirmPopup>
          </div>
        </div>


        <div class="upload-f" style="position: relative">
          <div class="p-field p-lg-8">
            <label class="btn btn-default p-0">
              <input type="file" (change)="selectFile($event)"/>
            </label>
          </div>

          <div class="p-field p-lg-2">
            <button class="btn btn-success btn-sm" (click)="upload()" [disabled]="!selectedFiles">
              Upload
            </button>
          </div>
        </div>

      </div>
      <div class="p-field p-lg-12" >
        <label for="imgDescription" class="label">Anh banner</label>
        <p-multiSelect formControlName="imgDescription" [options]="images"  defaultLabel="Select a images" optionLabel="name"
                       class="multiselect-custom" [filter]="false" [ngClass]="{'is-invalid': submitted && f['imgDescription'].errors}">
          <ng-template let-value pTemplate="selectedItems">
            <div class="country-item country-item-value" *ngFor="let option of form.get('imgDescription')?.value">
              <div>{{option.name}}</div>
            </div>
            <div *ngIf="!this.form.get('imgDescription')?.value || this.form.get('imgDescription')?.value.length === 0" class="country-placeholder">
              Select images
            </div>
          </ng-template>
          <ng-template let-image pTemplate="item">
            <div class="country-item">
              <div>{{image.name}}</div>
            </div>
          </ng-template>
        </p-multiSelect>
        <div *ngIf="type === 'EDIT'" >
          <div class="p-md-12 image-list" *ngFor="let image of imageEditBanner">
            <img [src]="image.url" style="width: 40px; height: 40px">
            <span>{{image.name}}</span>
            <i class="pi pi-trash" (click)="deleteImageOfProduct($event, image.id)" style="cursor: pointer"></i>
            <p-confirmPopup></p-confirmPopup>
          </div>
        </div>


        <div class="upload-f" style="position: relative">
          <div class="p-field p-lg-8">
            <label class="btn btn-default p-0">
              <input type="file" (change)="selectFile($event)"/>
            </label>
          </div>

          <div class="p-field p-lg-2">
            <button class="btn btn-success btn-sm" (click)="upload()" [disabled]="!selectedFiles">
              Upload
            </button>
          </div>
        </div>

      </div>
      <div *ngIf="message" class="alert alert-secondary p-field p-lg-12" role="alert">{{ message }}</div>

      <br/>
      <div *ngIf="type === 'CREATE'">
        <button type="submit" class="btn btn-primary">Save</button>
        <button
          class="btn btn-warning float-right"
          style="margin-left: 20px"
          (click)="onReset()"
        >
          Reset
        </button>
      </div>
      <div *ngIf="type === 'EDIT'">
        <button type="submit" class="btn btn-primary" >Lưu thay đổi</button>
        <button
          type="button"
          class="btn btn-warning float-right"
          style="margin-left: 20px"
          [disabled]="deleted"
          (click)="cancel()"
        >
          Hủy
        </button>
      </div>
    </div>
  </form>
  <p-toast></p-toast>
</p-dialog>
